## 3단계 - 의존성 리팩터링
### 요구사항
- 메뉴의 이름과 가격이 변경되면 주문 항목도 함께 변경된다. 메뉴 정보가 변경되더라도 주문 항목이 변경되지 않게 구현한다.
- 클래스 간의 방향도 중요하고 패키지 간의 방향도 중요하다. 클래스 사이, 패키지 사이의 의존 관계는 단방향이 되도록 해야 한다.
- 데이터베이스 스키마 변경 및 마이그레이션이 필요하다면 아래 문서를 적극 활용한다.

### 프로그래밍 요구사항
Lombok 은 그 강력한 기능만큼 사용상 주의를 표한다.
- 무분별한 setter 메서드 사용
- 객체 간에 상호 참조하는 경우 무한 루프에 빠질 가능성
- [Lombok 사용상 주의점(Pitfall)](https://kwonnam.pe.kr/wiki/java/lombok/pitfall) 
 
이번 과정에서는 Lombok 없이 미션을 진행해본다.

### To-Do
- [x] 양방향 의존성 제거하기
    - [x] 연관관계 분리하기
		- [x] 함께 생성되고 함께 삭제되는(도메인 제약사항을 공유하는) 객체 파악하기  
		    - 메뉴 관련 : MenuGroup, Menu, MenuProduct
		    - 주문 관련 : Order, OrderLineItem
		    - 테이블 관련 : TableGroup, OrderTable
		    - 상품 관련 : Product
		- [x] 같은 그룹끼리만 객체 참조 사용하기
		- [x] 다른 그룹 간의 객체 참조 끊기
- [x] 패키지 사이 의존성 사이클 제거하기  
    - TableGroupService 에서 OrderRepository 의존성 제거
		- 빈 테이블이면서 단체 지정된 테이블이 아닌 경우 단체 지정 가능
		- 빈 테이블이면 주문 불가
		- 즉, 단체 지정은 빈 테이블만 가능하나 주문은 빈 테이블은 할 수 없다. 단체 지정 해제를 위해서 주문 상태를 확인할 필요가 없다.
	- TableService 의 Order 로의 의존성은 인터페이스(Validator)로 의존성 역전 처리
- [x] 메뉴 정보가 변경되더라도 주문 항목이 변경되지 않게 구현한다.
	- 주문상품(order_line_item) 테이블에 주문한 메뉴 정보를 저장할 컬럼 추가
		- 메뉴명 : menu_name
		- 메뉴가격 : menu_price
	- 주문 메뉴와 저장된 메뉴의 이름과 가격을 비교하는 validate 기능 추가